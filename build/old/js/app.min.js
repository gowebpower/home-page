!function(){"use strict";function a(a,b){a.when("/",{templateUrl:"views/home/",controller:"homeCtrl"}).when("/works",{templateUrl:"views/works/",controller:"workCtrl"}).when("/works/:listId",{templateUrl:"views/works/detail.html",controller:"workCtrl"}).when("/about-me",{templateUrl:"views/about-me/",controller:"aboutMeCtrl"}).when("/about-this-site",{templateUrl:"views/about-this-site/",controller:"aboutThisWebCtrl"}).when("/contact",{templateUrl:"views/contact/",controller:"contactCtrl"})}var b=angular.module("BP",["ngRoute","ngAnimate","ngResource","mgcrea.ngStrap","ngMessages","hmTouchEvents"]);b.value("appInfo",{title:"Test App",version:"1.0.0",lastUpdated:"08-01-2015"}),b.config(a),a.$inject=["$routeProvider","$locationProvider"],function(){function a(a,b,c,d,e,f){a.appInfo=b,a.$watch(function(){return c.url()},function(b){a.currentPage=b}),a.headerMenu="inactive",a.showHeadrMenu=function(){null===a.headerMenu||"inactive"===a.headerMenu?a.headerMenu="active":a.headerMenu="inactive"},a.isHeaderMenuOpen=function(){(a.headerMenu="active")&&(a.headerMenu="inactive")},a.isMobile=function(){return f},a.isPreloadLoading=!0,a.isPreloadSuccessful=!1,a.preloadLoaded=0,a.preloadImages=["images/bg_global.jpg","images/bg_about-me.jpg","images/bg_about-me2.jpg","images/bg_about-me3.jpg","images/bg_about-me4.jpg"],e.preloadImages(a.preloadImages).then(function(b){a.isPreloadLoading=!1,a.isPreloadSuccessful=!0,console.info("Preload Successful")},function(b){a.isPreloadLoading=!1,a.isPreloadSuccessful=!1,console.error("Image Failed",imageLocation),console.info("Preload Failure")},function(b){a.preloadLoaded=b.percent+"%",console.info("Percent loaded:",a.preloadLoaded)})}b.controller("mainCtrl",a),a.$inject=["$scope","appInfo","$location","$routeParams","f_preloader","f_isMobile"]}(),function(){function a(a,b){}b.controller("homeCtrl",a),a.$inject=["$scope","appInfo"]}(),function(){function a(a,b,c,d,e,f,g){a.currentId=d.listId,a.allWorks=[],a.imageGallery=[],a.currentWork,a.currentFilter=localStorage["BP.listingFilter"]?localStorage["BP.listingFilter"]:"",a.showImageGallery=null,a.showLoading=!0,a.filterSetting=function(b){a.currentFilter=b.target.value,localStorage["BP.listingFilter"]=a.currentFilter},a.getThumnailListing=function(a){return'url("images/works/'+a+'/thumbnail.jpg")'},a.gotoList=function(a){b.path("works/"+a)},f.query().$promise.then(function(b){a.allWorks=b,a.currentId&&(a.currentWork=_.find(a.allWorks,function(b){return b.id===a.currentId}),h(a.currentWork.images),console.log(a.imageGallery))}),a.getThumnailDetail={background:function(a){return'url("'+a+'") center top #eee'}},a.currentIndex=0,a.toggleImageGallery=function(b){null===a.showImageGallery||"inactive"===a.showImageGallery?(a.setCurrentSlideIndex(b),g(function(){a.showImageGallery="active"},50)):a.showImageGallery="inactive"},a.setCurrentSlideIndex=function(b){a.currentIndex=b},a.isCurrentSlideIndex=function(b){return a.currentIndex===b},a.nextSlide=function(){a.currentIndex=a.currentIndex<a.imageGallery.length-1?++a.currentIndex:0},a.prevSlide=function(){a.currentIndex=a.currentIndex>0?--a.currentIndex:a.imageGallery.length-1};var h=function(b){a.imagePath="images/works/"+d.listId,a.imageGallery=[];for(var c=0;b>c;c++)a.imageGallery.push({image:a.imagePath+"/work"+c+".jpg",thumbnail:a.imagePath+"/work"+c+"_t.jpg",showLoading:!0,callback:function(a){e(this)}});var e=function(b){setTimeout(function(){b.showLoading=!1,a.$apply()},300)}}}b.controller("workCtrl",a),a.$inject=["$scope","$location","$resource","$routeParams","$q","s_myWork","$timeout"]}(),angular.module("BP").directive("loading",function(){return{restrict:"A",scope:{isrc:"=",onloadimg:"&"},replace:!0,template:'<img ng-src="{{isrc}}" class="display-none">',link:function(a,b,c){b.on("load",function(){a.onloadimg()})}}}),function(){function a(a){}b.controller("aboutThisWebCtrl",a),a.$inject=["$scope"]}(),function(){function a(a,b,c){var d=b.load(4);a.carousel={currentSection:function(){return d.currentSection},btnNext:function(){return d.btnNext},btnPre:function(){return d.btnPre},currentDetail:function(){return d.currentDetail},goNext:d.goNext.bind(d),goPre:d.goPre.bind(d),setCurrent:d.setCurrent.bind(d),showDetail:d.showDetail.bind(d)};var e=c.load();a.aboutExperience={setCurrent:e.setCurrent.bind(e),currentSection:function(){return e.currentSection}}}b.controller("aboutMeCtrl",a),a.$inject=["$scope","f_carousel","f_aboutExperience"]}(),function(){function a(a,b){a.contact={},a.isFormSent=!1,a.submitForm=function(){a.contactForm.$valid?b({method:"POST",url:"views/contact/send-email.php",data:a.contact,headers:{"Content-Type":"application/x-www-form-urlencoded"}}).success(function(b){console.log(b),b.success?a.isFormSent=!0:(a.messageHelper="Uh oh something went wrong. Please try again.",a.showMessageHelper=!0)}):(a.messageHelper="Please write valid information in each input.",a.showMessageHelper=!0)}}b.controller("contactCtrl",a),a.$inject=["$scope","$http"]}()}(),function(){"use strict";function a(a){function b(){this.currentSection=1}return b.load=function(){var a=new b;return a},b.prototype={setCurrent:function(a){this.currentSection=a}},b}angular.module("BP").factory("f_aboutExperience",a),a.$inject=["$rootScope"]}(),function(){"use strict";function a(a){function b(a){this.currentSection=1,this.totalSections=a,this.btnNext=!0,this.btnPre=!1,this.currentDetail=""}return b.load=function(a){var c=new b(a);return c},b.prototype={getCurrentSection:function(){return this.currentSection},goNext:function(){this.isLastSection()||(this.showDetail(""),this.currentSection++,this.updateBtnVisibility())},goPre:function(){this.isFirstSection()||(this.showDetail(""),this.currentSection--,this.updateBtnVisibility())},setCurrent:function(a){this.showDetail(""),this.currentSection=a,this.updateBtnVisibility()},showDetail:function(a){this.currentDetail=a},updateBtnVisibility:function(){this.isLastSection()?(this.btnNext=!1,this.btnPre=!0):this.isFirstSection()?(this.btnPre=!1,this.btnNext=!0):(this.btnPre=!0,this.btnNext=!0)},isLastSection:function(){return this.currentSection==this.totalSections},isFirstSection:function(){return 1==this.currentSection}},b}angular.module("BP").factory("f_carousel",a),a.$inject=["$rootScope"]}(),function(){"use strict";function a(){var a={Android:function(){return navigator.userAgent.match(/Android/i)},BlackBerry:function(){return navigator.userAgent.match(/BlackBerry/i)},iOS:function(){return navigator.userAgent.match(/iPhone|iPad|iPod/i)},Opera:function(){return navigator.userAgent.match(/Opera Mini/i)},Windows:function(){return navigator.userAgent.match(/IEMobile/i)},any:function(){return a.Android()||a.BlackBerry()||a.iOS()||a.Opera()||a.Windows()}};return a.any()?!0:!1}angular.module("BP").factory("f_isMobile",a),a.$inject=[]}(),function(){"use strict";function a(a,b){function c(b){this.imageLocations=b,this.imageCount=this.imageLocations.length,this.loadCount=0,this.errorCount=0,this.states={PENDING:1,LOADING:2,RESOLVED:3,REJECTED:4},this.state=this.states.PENDING,this.deferred=a.defer(),this.promise=this.deferred.promise}return c.preloadImages=function(a){var b=new c(a);return b.load()},c.prototype={constructor:c,isInitiated:function(){return this.state!==this.states.PENDING},isRejected:function(){return this.state===this.states.REJECTED},isResolved:function(){return this.state===this.states.RESOLVED},load:function(){if(this.isInitiated())return this.promise;this.state=this.states.LOADING;for(var a=0;a<this.imageCount;a++)this.loadImageLocation(this.imageLocations[a]);return this.promise},handleImageError:function(a){this.errorCount++,this.isRejected()||(this.state=this.states.REJECTED,this.deferred.reject(a))},handleImageLoad:function(a){this.loadCount++,this.isRejected()||(this.deferred.notify({percent:Math.ceil(this.loadCount/this.imageCount*100),imageLocation:a}),this.loadCount===this.imageCount&&(this.state=this.states.RESOLVED,this.deferred.resolve(this.imageLocations)))},loadImageLocation:function(a){var c=this,d=angular.element(new Image).bind("load",function(a){b.$apply(function(){c.handleImageLoad(a.target.src),c=d=a=null})}).bind("error",function(a){b.$apply(function(){c.handleImageError(a.target.src),c=d=a=null})}).attr("src",a)}},c}angular.module("BP").factory("f_preloader",a),a.$inject=["$q","$rootScope"]}(),function(){"use strict";function a(a){return a("ajax/works.json")}angular.module("BP").service("s_myWork",a),a.$inject=["$resource"]}();